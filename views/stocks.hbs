{{!-- Citation: https://github.com/osu-cs340-ecampus/nodejs-starter-app --}}


<html>

<head>
  <title>Stocks</title>
</head>

<body>
  <h1>Welcome to TD Memetrade</h1>
  <div id="browse" style="display: block">
    <h2>TD Memetrade's Hottest Stocks</h2>

    <table id="stocks-table">
      <thead>
        <tr>
          {{!{{#each data.[0]}}
          <th>{{!{{@key}}Stock ID</th>
          <th>Stock Name</th>
          <th>Stock Symbol</th>
          <th>Current Price ($)</th>
          <th>High Price ($)</th>
          <th>Low Price ($)</th>
          <th>Market Sector ID</th>
          <th>Market Index ID</th>
          <th>Delete</th>
          {{!{{/each}}
        </tr>
      </thead>

      <tbody>
        {{#each data}}
        <tr>
          <td>{{this.stockID}}</td>
          <td>{{this.stockName}}</td>
          <td>{{this.stockSymbol}}</td>
          <td>{{this.currentPrice}}</td>
          <td>{{this.highPrice}}</td>
          <td>{{this.lowPrice}}</td>
          <td>{{this.sectorID}}</td>
          <td>{{this.MarketIndexes_indexID}}</td>
          <td><button class="del-btn" onclick="deleteStock({{this.stockID}})">Delete</button></td>
        </tr>
        {{/each}}
      </tbody>
    </table>
    <script src="./js/delete_stock.js"></script>
    <p>&nbsp;</p>
  </div> <!-- browse -->
  <div id="insert" style="display: block">
    <form id="addStockAjax">
      <legend><strong>Add Stock</strong></legend>
      <fieldset class="fields">
        <label for="stockName"> Name </label> <input type="text" name="stockName" id="stockName" required></br>
        <label for="stockSymbol"> Symbol </label> <input type="text" name="stockSymbol" id="stockSymbol" required></br>
        <label for="currentPrice"> Current Price ($) </label> <input class="num-input" type="number"
          step="0.01 required" name="currentPrice" id="currentPrice" required></br>
        <label for="highPrice"> High Price ($) </label> <input class="num-input" type="number" step="0.01"
          name="highPrice" id="highPrice" required></br>
        <label for="lowPrice"> Low Price ($) </label> <input class="num-input" type="number" step="0.01" name="lowPrice"
          id="lowPrice" required></br>
        <label for="sectorID"> Market Sector (Optional) </label> <select name="sectorID" id="sectorID">
          <option value="0">&nbsp;</option>
          {{#each sectors}}
          <option value="{{this.sectorID}}">{{this.sectorName}}</option>
          {{/each}}
        </select></br>
        <label for="indexID"> Market Index </label> <select name="indexID" id="indexID">
          <option value="NULL">&nbsp;</option>
          {{#each indexes}}
          <option value="{{this.indexID}}">{{this.indexName}}</option>
          {{/each}}
        </select></br>
      </fieldset>
      <input class="btn" type="submit" id="addStock" value="Add a Stock">
      <input class="btn" type="button" value="Cancel">
    </form>
    <!--add new stock-->
    {{!-- Embed our javascript to handle the DOM manipulation and AJAX request --}}
    <script src="./js/add_stock.js"></script>
  </div><!-- insert -->

  <div id="update" style="display: block">
    <form id="update-stock-form-ajax">
      <p><strong>(Note: You must re-enter data in fields that you are not updating.)</strong></p>
      <legend><strong>Update Stock</strong>
      </legend>
      <fieldset class="fields">
        <label for="input-stockName">Name</label>
        <select name="input-stockName" id="inputStockID">
          <option value="test">Select a stock</option>
          {{#each data}}
          <option value="{{this.stockID}}">{{this.stockName}}</option>
          {{/each}}
        </select></br>

        <label for="input-currentPrice-update"> Current Price ($) </label> <input class="num-input" type="number"
          step="0.01" name="input-currentPrice-update" id="input-currentPrice-update" required></br>

        <label for="input-highPrice-update"> High Price ($) </label> <input class="num-input" type="number" step="0.01"
          name="input-highPrice-update" id="input-highPrice-update" required></br>

        <label for="input-lowPrice-update"> Low Price ($) </label> <input class="num-input" type="number" step="0.01"
          name="input-lowPrice-update" id="input-lowPrice-update" required></br>

        <label for="updateSectorID"> Market Sector (Optional)</label> <select name="updateSectorID" id="updateSectorID">
          <option value="">NULL</option>
          {{#each sectors}}
          <option value="{{this.sectorID}}">{{this.sectorName}}</option>
          {{/each}}
        </select></br>

      </fieldset>
      <input class="btn" type="submit" id="updateStock" value="Update Stock">
    </form>

    <script src="./js/update_stock.js"></script>
  </div><!-- update -->
</body>
<p>&nbsp;</p>
<footer>&copy Kevin Riemer and Brandon Koehler 2023</footer>

</html>